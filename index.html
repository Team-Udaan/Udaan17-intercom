<!DOCTYPE html>
<html>
<head>
    <script src="node_modules/simplewebrtc/latest-v2.js"></script>
    <script src="jquery-3.1.1.min.js"></script>
    <script src="handlebars.runtime.min.js"></script>
    <script src="calling-buttons-template.min.js"></script>
</head>
<body>


<video height="300" id="localVideo"></video>
<div id="remotesVideos"></div>
<input type="text" id="username">
<button id="submit">Submit</button>
<button id="submit1">Submit</button>

<div id="peers"></div>

<script>

    var allPeers = [];
    var peerInfo = {};

    webrtc = new SimpleWebRTC({
        // the id/element dom element that will hold "our" video
        localVideoEl: 'localVideo',
        // the id/element dom element that will hold remote videos
        remoteVideosEl: 'remotesVideos',
        // immediately ask for camera access
        autoRequestMedia: true

    });

    $('#submit').click(function(){

        var username = $('#username').val();
        webrtc.joinRoom('idle');
        webrtc.nick=$('#username').val();
        //webrtc.sendDirectlyToAll('text', 'newPeer', peerInfo.username);
    });
    $('#submit1').click(function(){
        webrtc.sendToAll('setDisplayName',{name: $('#username').val(),nickname:'Sasuke'});
    });
    webrtc.on('message', function (data) {
        if (data.type == 'setDisplayName') {
//            var name = data;
            console.log(data.payload);
        }
    });

</script>



</body>
</html>