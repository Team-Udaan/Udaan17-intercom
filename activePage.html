<!DOCTYPE html>
<html>
<head>
    <script src="node_modules/simplewebrtc/latest-v2.js"></script>
    <script src="node_modules/page/page.js"></script>
</head>
<body>
<video height="300" id="localVideo"></video>
<div id="remotesVideos"></div>
<button id="end-call" onclick="endCall()">End call</button>
<script>
    var webrtc = new SimpleWebRTC({
        localVideoEl: 'localVideo',
        remoteVideosEl: 'remotesVideos',
        url: 'https://' + location.hostname + ":8888",
        autoRequestMedia: true
    });
    webrtc.on('readyToCall', function () {
        var room = location.search.split('?')[1];
        webrtc.joinRoom(room);
    });
    webrtc.connection.on('remove', function () {
        webrtc.disconnect();
        page('/');
    });
    function endCall() {
        webrtc.disconnect();
        page('/');
    }
</script>
</body>
</html>